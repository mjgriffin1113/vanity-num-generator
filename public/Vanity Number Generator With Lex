{"modules":[{"id":"cd415070-3abf-4ea8-892e-c2de108eed91","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"d16cf70e-323d-49d9-b12c-81033f7fb4bb"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":148,"y":17}}},{"id":"d16cf70e-323d-49d9-b12c-81033f7fb4bb","type":"SetVoice","branches":[{"condition":"Success","transition":"6a489164-3ea8-4c3d-aad8-1f806330e2c1"}],"parameters":[{"name":"GlobalVoice","value":"Joanna"}],"metadata":{"position":{"x":381,"y":17},"overrideConsoleVoice":false,"defaultVoice":"Conversational"}},{"id":"d168fe4e-df9b-41c1-9567-8a77638bf390","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"true","transition":"7f60d8ea-8e01-4ffa-a4e7-ab3cfb260267"},{"condition":"NoMatch","transition":"97e98461-2dd9-4c6a-8337-4131ed73d28d"}],"parameters":[{"name":"Attribute","value":"hasCustomerDataFlag"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":839,"y":15},"conditionMetadata":[{"operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"true","id":"f421cbc6-8928-42c7-8a98-91540add83b1"}]}},{"id":"97e98461-2dd9-4c6a-8337-4131ed73d28d","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e886db9a-bef4-409e-87cc-21fa9ea6f746"}],"parameters":[{"name":"Text","value":"<speak> Hello. Please wait while we generate your custom vanity number. </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":166,"y":358},"useDynamic":false}},{"id":"7f60d8ea-8e01-4ffa-a4e7-ab3cfb260267","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"KeepExistingOptions","transition":"feaffeab-261e-41d4-8f2d-3bd6359048cd"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"GenerateNewOptions","transition":"97e98461-2dd9-4c6a-8337-4131ed73d28d"},{"condition":"NoMatch","transition":"2294fb77-7a1f-459d-9f1c-65c43ea7b4e6"},{"condition":"Error","transition":"2294fb77-7a1f-459d-9f1c-65c43ea7b4e6"}],"parameters":[{"name":"Text","value":"<speak> Welcome back, valued customer. We have your information saved. Please say or press 1 if you would like to hear your current options. Otherwise, say or press 2 and we will generate new options for you. </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"BotName","value":"GetVanityOptionsPreference"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":1124,"y":22},"conditionMetadata":[{"id":"ef60715e-049a-46b6-b4ce-9eef7509612a","value":"KeepExistingOptions"},{"id":"a853204f-c106-4f0e-b664-10fc45598006","value":"GenerateNewOptions"}],"useDynamic":false,"dynamicMetadata":{},"useLexBotDropdown":true,"lexV2BotName":"GetVanityOptionsPreference"},"target":"Lex"},{"id":"d2cba728-2ff7-47cb-a82e-5a16e0747926","type":"PlayPrompt","branches":[{"condition":"Success","transition":"feaffeab-261e-41d4-8f2d-3bd6359048cd"}],"parameters":[{"name":"Text","value":"<speak> Sorry. I still didn't get that. I will repeat your existing vanity number options. </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":1729,"y":197},"useDynamic":false}},{"id":"ff5374b3-d95b-4e23-9c61-5237e595b8ac","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e5636b28-c113-4ac7-afc7-4d7a6dc5d46e"}],"parameters":[{"name":"Text","value":"<speak> Hey there. Your suggested vanity number is  <prosody rate=\"slow\"> $.Attributes.vanityNumber </prosody> Thanks for using our service </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":1571,"y":527},"useDynamic":false}},{"id":"32a7086e-21de-42df-9df3-ae29cd439e14","type":"PlayPrompt","branches":[{"condition":"Success","transition":"8525d9a5-1b59-4c87-a04d-216453669e2f"}],"parameters":[{"name":"Text","value":"<speak> Ok. Your suggested vanity numbers are <prosody rate=\"slow\"> $.Attributes.option1 . $.Attributes.option2 . $.Attributes.option3 . $.Attributes.option4 . $.Attributes.option5 . </prosody> Thanks for using our service. Have a great day. </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":2071,"y":522},"useDynamic":false}},{"id":"7937df87-a0b2-4ee4-a368-4aa114757087","type":"PlayPrompt","branches":[{"condition":"Success","transition":"8525d9a5-1b59-4c87-a04d-216453669e2f"}],"parameters":[{"name":"Text","value":"<speak> I'm sorry. We were unable to record your response. Please try calling again if you want to hear your current options, or generate new ones. Have a wonderful day. </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":2074,"y":697},"useDynamic":false}},{"id":"8525d9a5-1b59-4c87-a04d-216453669e2f","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1675,"y":907}}},{"id":"2294fb77-7a1f-459d-9f1c-65c43ea7b4e6","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"feaffeab-261e-41d4-8f2d-3bd6359048cd"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"2","transition":"97e98461-2dd9-4c6a-8337-4131ed73d28d"},{"condition":"Timeout","transition":"d2cba728-2ff7-47cb-a82e-5a16e0747926"},{"condition":"NoMatch","transition":"d2cba728-2ff7-47cb-a82e-5a16e0747926"},{"condition":"Error","transition":"1e6a5b8f-4b42-493b-b48f-94c55a65bc63"}],"parameters":[{"name":"Text","value":"<speak> Let's try this another way. Please press 1 if you would like to hear your current options. Otherwise, press 2 and we will generate new options for you. </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":"1"}],"metadata":{"position":{"x":1412,"y":21},"conditionMetadata":[{"id":"ee9503b4-8652-41e6-9ca1-25fdadb19c69","value":"1"},{"id":"df313c93-167a-4fb4-990e-5f1f708a5aaa","value":"2"}],"useDynamic":false,"useLexBotDropdown":true,"lexV2BotName":null},"target":"Digits"},{"id":"5ef44c52-8c1f-44f0-ba47-872ed97bbdf7","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"ff5374b3-d95b-4e23-9c61-5237e595b8ac"},{"condition":"Error","transition":"1e6a5b8f-4b42-493b-b48f-94c55a65bc63"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:345859732721:function:vanity-num-generator-insertGeneratedNumbersLambda-ZCZYcWSUTB0J","namespace":null},{"name":"TimeLimit","value":"5"},{"name":"Parameter","key":"option1","value":"option1","namespace":"User Defined"},{"name":"Parameter","key":"option2","value":"option2","namespace":"User Defined"},{"name":"Parameter","key":"option3","value":"option3","namespace":"User Defined"},{"name":"Parameter","key":"option4","value":"option4","namespace":"User Defined"},{"name":"Parameter","key":"option5","value":"option5","namespace":"User Defined"},{"name":"Parameter","key":"vanityNumber","value":"vanityNumber","namespace":"User Defined"},{"name":"Parameter","key":"customerPhone","value":"customerPhone","namespace":"User Defined"}],"metadata":{"position":{"x":1333,"y":490},"dynamicMetadata":{"option1":true,"option2":true,"option3":true,"option4":true,"option5":true,"vanityNumber":true,"customerPhone":true},"useDynamic":false},"target":"Lambda"},{"id":"feaffeab-261e-41d4-8f2d-3bd6359048cd","type":"SetAttributes","branches":[{"condition":"Success","transition":"5ef44c52-8c1f-44f0-ba47-872ed97bbdf7"},{"condition":"Error","transition":"1e6a5b8f-4b42-493b-b48f-94c55a65bc63"}],"parameters":[{"name":"Attribute","value":"vanityNumber","key":"vanityNumber","namespace":"External"},{"name":"Attribute","value":"customerPhone","key":"customerPhone","namespace":"External"},{"name":"Attribute","value":"option1","key":"option1","namespace":"External"},{"name":"Attribute","value":"option2","key":"option2","namespace":"External"},{"name":"Attribute","value":"option3","key":"option3","namespace":"External"},{"name":"Attribute","value":"option4","key":"option4","namespace":"External"},{"name":"Attribute","value":"option5","key":"option5","namespace":"External"}],"metadata":{"position":{"x":1106,"y":448}}},{"id":"e886db9a-bef4-409e-87cc-21fa9ea6f746","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"feaffeab-261e-41d4-8f2d-3bd6359048cd"},{"condition":"Error","transition":"1e6a5b8f-4b42-493b-b48f-94c55a65bc63"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:345859732721:function:vanity-num-generator-vanityNumberGeneratorLambda-wd9XVuVRbOlG","namespace":null},{"name":"TimeLimit","value":"3"}],"metadata":{"position":{"x":858,"y":400},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"6a489164-3ea8-4c3d-aad8-1f806330e2c1","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"d168fe4e-df9b-41c1-9567-8a77638bf390"},{"condition":"Error","transition":"1e6a5b8f-4b42-493b-b48f-94c55a65bc63"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:345859732721:function:vanity-num-generator-getCustomerDataLambda-7of6nMeN0sPG","namespace":null},{"name":"TimeLimit","value":"3"}],"metadata":{"position":{"x":611,"y":15},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"e5636b28-c113-4ac7-afc7-4d7a6dc5d46e","type":"GetUserInput","branches":[{"condition":"Timeout","transition":"7937df87-a0b2-4ee4-a368-4aa114757087"},{"condition":"NoMatch","transition":"7937df87-a0b2-4ee4-a368-4aa114757087"},{"condition":"Error","transition":"1e6a5b8f-4b42-493b-b48f-94c55a65bc63"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"ff5374b3-d95b-4e23-9c61-5237e595b8ac"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"2","transition":"32a7086e-21de-42df-9df3-ae29cd439e14"}],"parameters":[{"name":"Text","value":"<speak> Please press 1 if you would like to hear that number again. Please press 2 if you want to hear all of your possible vanity number options. </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":"1"}],"metadata":{"position":{"x":1803,"y":495},"conditionMetadata":[{"id":"b8b85460-e5ac-4e3f-8571-cb3a213f8f33","value":"1"},{"id":"876f4d08-e6b7-4f00-8107-ce201b9043a3","value":"2"}],"useDynamic":false,"useLexBotDropdown":true},"target":"Digits"},{"id":"1e6a5b8f-4b42-493b-b48f-94c55a65bc63","type":"PlayPrompt","branches":[{"condition":"Success","transition":"8525d9a5-1b59-4c87-a04d-216453669e2f"}],"parameters":[{"name":"Text","value":"Sorry, an unexpected error occured. Please try calling again for your vanity number suggestion.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":734,"y":828},"useDynamic":false}}],"version":"1","type":"contactFlow","start":"cd415070-3abf-4ea8-892e-c2de108eed91","metadata":{"entryPointPosition":{"x":15,"y":23},"snapToGrid":false,"name":"Vanity Number Generator With Lex","description":null,"type":"contactFlow","status":"published","hash":"d798f9ad60485ad2a893ba8f3762eb6290d27f4c174e4232a3411c1942262bf3"}}